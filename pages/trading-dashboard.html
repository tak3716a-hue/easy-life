<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CME Ìï¥Ïô∏ÏÑ†Î¨º Ìä∏Î†àÏù¥Îî© ÎåÄÏãúÎ≥¥Îìú - Easy Life</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FFD700;
            --secondary: #0a0a14;
            --life: #4ecdc4;
            --bg-dark: #0d0d1a;
            --card-bg: rgba(20, 20, 35, 0.95);
            --border-color: rgba(78, 205, 196, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #0a0a14, #1a1a2e, #0d0d1a);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 15px;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(78, 205, 196, 0.15);
            border: 1px solid var(--life);
            border-radius: 8px;
            color: var(--life);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: var(--life);
            color: var(--secondary);
        }

        header {
            text-align: center;
            flex: 1;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--life);
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .current-time {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            color: var(--primary);
            padding: 10px 20px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--primary);
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--primary);
            border-radius: 2px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 1400px) {
            .charts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            border-color: var(--life);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.2);
        }

        .chart-header {
            padding: 12px 15px;
            background: rgba(78, 205, 196, 0.1);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chart-title {
            font-weight: 700;
            color: var(--life);
            font-size: 0.95rem;
        }

        .chart-symbol {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .chart-container {
            height: 400px;
        }

        .chart-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Trading Memo Section */
        .memo-section {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 20px;
            margin-top: 30px;
        }

        .memo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .memo-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .memo-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .btn-primary {
            background: var(--life);
            color: var(--secondary);
        }

        .btn-primary:hover {
            background: #3dbdb5;
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.4);
        }

        .btn-danger {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .btn-danger:hover {
            background: #ff6b6b;
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 215, 0, 0.2);
            color: var(--primary);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: var(--secondary);
        }

        .trade-input-form {
            display: grid;
            grid-template-columns: 120px 150px 100px 80px 80px 1fr auto;
            gap: 10px;
            margin-bottom: 20px;
            align-items: end;
        }

        @media (max-width: 1200px) {
            .trade-input-form {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 600px) {
            .trade-input-form {
                grid-template-columns: 1fr 1fr;
            }
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-group label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
        }

        .input-group input,
        .input-group select {
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            font-size: 0.9rem;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--life);
            background: rgba(78, 205, 196, 0.1);
        }

        .input-group select option {
            background: var(--secondary);
        }

        .trades-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .trades-table th {
            background: rgba(78, 205, 196, 0.15);
            padding: 12px 10px;
            text-align: left;
            color: var(--life);
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
        }

        .trades-table td {
            padding: 12px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .trades-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .trade-long {
            color: #4ecdc4;
        }

        .trade-short {
            color: #ff6b6b;
        }

        .profit-positive {
            color: #4ecdc4;
            font-weight: 700;
        }

        .profit-negative {
            color: #ff6b6b;
            font-weight: 700;
        }

        .delete-trade {
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 1rem;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .delete-trade:hover {
            opacity: 1;
        }

        .no-trades {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.4);
        }

        .summary-bar {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .summary-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
        }

        .summary-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
        }

        .summary-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
        }

        .table-container {
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <a href="../index.html" class="back-btn">‚Üê ÌôàÏúºÎ°ú</a>
            <header>
                <h1>CME FUTURES TRADING DASHBOARD</h1>
                <p class="subtitle">Ìï¥Ïô∏ÏÑ†Î¨º Ïã§ÏãúÍ∞Ñ Ìä∏Î†àÏù¥Îî© ÎåÄÏãúÎ≥¥Îìú | Bollinger Bands + RSI</p>
            </header>
            <div class="current-time" id="currentTime">--:--:--</div>
        </div>

        <!-- 2ÏãúÍ∞ÑÎ¥â Ï∞®Ìä∏ ÏÑπÏÖò -->
        <div class="section-title">2ÏãúÍ∞ÑÎ¥â Ï∞®Ìä∏ (2H)</div>
        <div class="charts-grid" id="charts2H">
            <!-- Charts will be inserted by JavaScript -->
        </div>

        <!-- 10Î∂ÑÎ¥â Ï∞®Ìä∏ ÏÑπÏÖò -->
        <div class="section-title">10Î∂ÑÎ¥â Ï∞®Ìä∏ (10M)</div>
        <div class="charts-grid" id="charts10M">
            <!-- Charts will be inserted by JavaScript -->
        </div>

        <!-- Îß§Îß§ Í∏∞Î°ù Î©îÎ™®Ïû• -->
        <div class="memo-section">
            <div class="memo-header">
                <div class="memo-title">
                    <span>üìù</span> Îß§Îß§ Í∏∞Î°ùÏû•
                </div>
                <div class="memo-actions">
                    <button class="btn btn-secondary" onclick="exportTrades()">üì• ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                    <button class="btn btn-danger" onclick="clearAllTrades()">üóëÔ∏è Ï†ÑÏ≤¥ ÏÇ≠Ï†ú</button>
                </div>
            </div>

            <div class="trade-input-form">
                <div class="input-group">
                    <label>ÎÇ†Ïßú/ÏãúÍ∞Ñ</label>
                    <input type="datetime-local" id="tradeDateTime">
                </div>
                <div class="input-group">
                    <label>Ï¢ÖÎ™©</label>
                    <select id="tradeSymbol">
                        <option value="NQ">ÎÇòÏä§Îã•100 (NQ)</option>
                        <option value="CL">ÌÅ¨Î£®ÎìúÏò§Ïùº (CL)</option>
                        <option value="NG">Ï≤úÏó∞Í∞ÄÏä§ (NG)</option>
                        <option value="GC">Í≥®Îìú (GC)</option>
                        <option value="RTY">Îü¨ÏÖÄ2000 (RTY)</option>
                        <option value="6E">Ïú†Î°úFX (6E)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Ìè¨ÏßÄÏÖò</label>
                    <select id="tradePosition">
                        <option value="LONG">LONG (Îß§Ïàò)</option>
                        <option value="SHORT">SHORT (Îß§ÎèÑ)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ÏßÑÏûÖÍ∞Ä</label>
                    <input type="number" id="tradeEntry" step="0.01" placeholder="0.00">
                </div>
                <div class="input-group">
                    <label>Ï≤≠ÏÇ∞Í∞Ä</label>
                    <input type="number" id="tradeExit" step="0.01" placeholder="0.00">
                </div>
                <div class="input-group">
                    <label>Î©îÎ™®</label>
                    <input type="text" id="tradeMemo" placeholder="Îß§Îß§ ÏÇ¨Ïú†, ÎäêÎÇÄÏ†ê Îì±...">
                </div>
                <div class="input-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-primary" onclick="addTrade()">+ Í∏∞Î°ù Ï∂îÍ∞Ä</button>
                </div>
            </div>

            <div class="table-container">
                <table class="trades-table">
                    <thead>
                        <tr>
                            <th>ÎÇ†Ïßú/ÏãúÍ∞Ñ</th>
                            <th>Ï¢ÖÎ™©</th>
                            <th>Ìè¨ÏßÄÏÖò</th>
                            <th>ÏßÑÏûÖÍ∞Ä</th>
                            <th>Ï≤≠ÏÇ∞Í∞Ä</th>
                            <th>ÏÜêÏùµ</th>
                            <th>Î©îÎ™®</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="tradesBody">
                        <tr class="no-trades">
                            <td colspan="8">Í∏∞Î°ùÎêú Îß§Îß§Í∞Ä ÏóÜÏäµÎãàÎã§.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="summary-bar">
                <div class="summary-item">
                    <span class="summary-label">Ï¥ù Í±∞Îûò:</span>
                    <span class="summary-value" id="totalTrades">0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">ÏäπÎ•†:</span>
                    <span class="summary-value" id="winRate">0%</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Ï¥ù ÏÜêÏùµ:</span>
                    <span class="summary-value" id="totalPnL">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- TradingView Widget Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // Chart configurations - CFD/Index symbols (CME ÏÑ†Î¨ºÍ≥º ÎèôÏùºÌïòÍ≤å ÏõÄÏßÅÏûÑ)
        const symbols = [
            { name: 'ÎÇòÏä§Îã•100', symbol: 'PEPPERSTONE:NAS100', shortName: 'NQ' },
            { name: 'ÌÅ¨Î£®ÎìúÏò§Ïùº', symbol: 'TVC:USOIL', shortName: 'CL' },
            { name: 'Ï≤úÏó∞Í∞ÄÏä§', symbol: 'PEPPERSTONE:NATGAS', shortName: 'NG' },
            { name: 'Í≥®Îìú', symbol: 'TVC:GOLD', shortName: 'GC' },
            { name: 'Îü¨ÏÖÄ2000', symbol: 'PEPPERSTONE:US2000', shortName: 'RTY' },
            { name: 'Ïú†Î°úFX', symbol: 'FX:EURUSD', shortName: '6E' }
        ];

        let chartCounter = 0;

        // Create chart HTML structure
        function createChartCards(containerId, interval, intervalLabel) {
            const container = document.getElementById(containerId);
            symbols.forEach((item, index) => {
                const chartId = `tradingview_${containerId}_${index}`;
                const card = document.createElement('div');
                card.className = 'chart-card';
                card.innerHTML = `
                    <div class="chart-header">
                        <span class="chart-title">${item.name}</span>
                        <span class="chart-symbol">${item.shortName} | ${intervalLabel}</span>
                    </div>
                    <div class="chart-container" id="${chartId}"></div>
                `;
                container.appendChild(card);
            });
        }

        // Initialize TradingView widgets
        function initCharts(containerId, interval) {
            symbols.forEach((item, index) => {
                const chartId = `tradingview_${containerId}_${index}`;
                new TradingView.widget({
                    "autosize": true,
                    "symbol": item.symbol,
                    "interval": interval,
                    "timezone": "Asia/Seoul",
                    "theme": "dark",
                    "style": "1",
                    "locale": "kr",
                    "toolbar_bg": "#0d0d1a",
                    "enable_publishing": false,
                    "hide_top_toolbar": false,
                    "hide_legend": false,
                    "allow_symbol_change": true,
                    "save_image": false,
                    "container_id": chartId,
                    "studies": [
                        "STD;Bollinger_Bands",
                        "STD;RSI"
                    ],
                    "hide_volume": true
                });
            });
        }

        // Create chart containers
        createChartCards('charts2H', '120', '2H');
        createChartCards('charts10M', '10', '10M');

        // Initialize after DOM is ready
        setTimeout(() => {
            initCharts('charts2H', '120');
            initCharts('charts10M', '10');
        }, 100);

        // Update current time
        function updateTime() {
            const now = new Date();
            const options = {
                timeZone: 'Asia/Seoul',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            document.getElementById('currentTime').textContent =
                now.toLocaleTimeString('ko-KR', options) + ' KST';
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Set default datetime for trade input
        function setDefaultDateTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('tradeDateTime').value = now.toISOString().slice(0, 16);
        }
        setDefaultDateTime();

        // Trading memo functionality
        let trades = JSON.parse(localStorage.getItem('cme_trades') || '[]');

        function saveTrades() {
            localStorage.setItem('cme_trades', JSON.stringify(trades));
        }

        function calculatePnL(position, entry, exit) {
            if (!entry || !exit) return null;
            const diff = position === 'LONG' ? exit - entry : entry - exit;
            return diff;
        }

        function renderTrades() {
            const tbody = document.getElementById('tradesBody');

            if (trades.length === 0) {
                tbody.innerHTML = '<tr class="no-trades"><td colspan="8">Í∏∞Î°ùÎêú Îß§Îß§Í∞Ä ÏóÜÏäµÎãàÎã§.</td></tr>';
                updateSummary();
                return;
            }

            tbody.innerHTML = trades.map((trade, index) => {
                const pnl = calculatePnL(trade.position, trade.entry, trade.exit);
                const pnlClass = pnl > 0 ? 'profit-positive' : pnl < 0 ? 'profit-negative' : '';
                const positionClass = trade.position === 'LONG' ? 'trade-long' : 'trade-short';

                return `
                    <tr>
                        <td>${trade.dateTime || '-'}</td>
                        <td>${trade.symbol}</td>
                        <td class="${positionClass}">${trade.position}</td>
                        <td>${trade.entry || '-'}</td>
                        <td>${trade.exit || '-'}</td>
                        <td class="${pnlClass}">${pnl !== null ? (pnl > 0 ? '+' : '') + pnl.toFixed(2) : '-'}</td>
                        <td>${trade.memo || '-'}</td>
                        <td><button class="delete-trade" onclick="deleteTrade(${index})">‚úï</button></td>
                    </tr>
                `;
            }).join('');

            updateSummary();
        }

        function updateSummary() {
            const completedTrades = trades.filter(t => t.entry && t.exit);
            const totalTrades = completedTrades.length;

            let wins = 0;
            let totalPnL = 0;

            completedTrades.forEach(trade => {
                const pnl = calculatePnL(trade.position, trade.entry, trade.exit);
                if (pnl > 0) wins++;
                totalPnL += pnl;
            });

            document.getElementById('totalTrades').textContent = totalTrades;
            document.getElementById('winRate').textContent =
                totalTrades > 0 ? (wins / totalTrades * 100).toFixed(1) + '%' : '0%';

            const pnlElement = document.getElementById('totalPnL');
            pnlElement.textContent = (totalPnL > 0 ? '+' : '') + totalPnL.toFixed(2);
            pnlElement.className = 'summary-value ' + (totalPnL > 0 ? 'profit-positive' : totalPnL < 0 ? 'profit-negative' : '');
        }

        function addTrade() {
            const dateTime = document.getElementById('tradeDateTime').value;
            const symbol = document.getElementById('tradeSymbol').value;
            const position = document.getElementById('tradePosition').value;
            const entry = parseFloat(document.getElementById('tradeEntry').value) || null;
            const exit = parseFloat(document.getElementById('tradeExit').value) || null;
            const memo = document.getElementById('tradeMemo').value;

            if (!dateTime) {
                alert('ÎÇ†Ïßú/ÏãúÍ∞ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            trades.unshift({
                dateTime: dateTime.replace('T', ' '),
                symbol,
                position,
                entry,
                exit,
                memo
            });

            saveTrades();
            renderTrades();

            // Reset form
            document.getElementById('tradeEntry').value = '';
            document.getElementById('tradeExit').value = '';
            document.getElementById('tradeMemo').value = '';
            setDefaultDateTime();
        }

        function deleteTrade(index) {
            if (confirm('Ïù¥ Í∏∞Î°ùÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                trades.splice(index, 1);
                saveTrades();
                renderTrades();
            }
        }

        function clearAllTrades() {
            if (confirm('Î™®Îì† Îß§Îß§ Í∏∞Î°ùÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) {
                trades = [];
                saveTrades();
                renderTrades();
            }
        }

        function exportTrades() {
            if (trades.length === 0) {
                alert('ÎÇ¥Î≥¥ÎÇº Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§.');
                return;
            }

            const headers = ['ÎÇ†Ïßú/ÏãúÍ∞Ñ', 'Ï¢ÖÎ™©', 'Ìè¨ÏßÄÏÖò', 'ÏßÑÏûÖÍ∞Ä', 'Ï≤≠ÏÇ∞Í∞Ä', 'ÏÜêÏùµ', 'Î©îÎ™®'];
            const csvContent = [
                headers.join(','),
                ...trades.map(t => {
                    const pnl = calculatePnL(t.position, t.entry, t.exit);
                    return [
                        t.dateTime,
                        t.symbol,
                        t.position,
                        t.entry || '',
                        t.exit || '',
                        pnl !== null ? pnl.toFixed(2) : '',
                        `"${(t.memo || '').replace(/"/g, '""')}"`
                    ].join(',');
                })
            ].join('\n');

            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `trading_records_${new Date().toISOString().slice(0, 10)}.csv`;
            link.click();
        }

        // Initial render
        renderTrades();
    </script>
</body>
</html>
